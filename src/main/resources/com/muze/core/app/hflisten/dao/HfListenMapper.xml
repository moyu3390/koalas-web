<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.muze.core.app.hflisten.dao.HfListenMapper" >
  <resultMap id="BaseResultMap" type="com.muze.core.app.hflisten.model.HfListen" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="eid" property="id" jdbcType="BIGINT" />
    <result column="order_id" property="orderId" jdbcType="BIGINT" />
    <result column="area" property="area" jdbcType="VARCHAR" />
    <result column="nj" property="nj" jdbcType="VARCHAR" />
    <result column="listen_subject" property="listenSubject" jdbcType="VARCHAR" />
    <result column="listen_time" property="listenTime" jdbcType="TIMESTAMP" />
    <result column="teacher" property="teacher" jdbcType="VARCHAR" />
    <result column="teacher_phone" property="teacherPhone" jdbcType="VARCHAR" />
    <result column="if_bounced" property="ifBounced" jdbcType="BIT" />
    <result column="ifbounced_time" property="ifbouncedTime" jdbcType="TIMESTAMP" />
    <result column="ec_time" property="cTime" jdbcType="TIMESTAMP" />
    <result column="eu_time" property="uTime" jdbcType="TIMESTAMP" />
    <result column="valid" property="valid" jdbcType="INTEGER" />
    <result column="teacher_info" property="teacherInfo" jdbcType="LONGVARCHAR" />
    <association property="hfOrder" resultMap="OrderMap"/>
  </resultMap>

  <resultMap id="OrderMap" type="com.muze.core.app.hforder.model.HfOrder" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="doc_id" property="docId" jdbcType="VARCHAR" />
    <result column="student_id" property="studentId" jdbcType="VARCHAR" />
    <result column="student_name" property="studentName" jdbcType="VARCHAR" />
    <result column="gaokao_year" property="gaokaoYear" jdbcType="DATE" />
    <result column="love_subject" property="loveSubject" jdbcType="VARCHAR" />
    <result column="channel" property="channel" jdbcType="VARCHAR" />
    <result column="if_listener" property="ifListener" jdbcType="BIT" />
    <result column="if_success" property="ifSuccess" jdbcType="BIT" />
    <result column="if_error" property="ifError" jdbcType="BIT" />
    <result column="if_introduction" property="ifIntroduction" jdbcType="BIT" />
    <result column="introduction_type" property="introductionType" jdbcType="VARCHAR" />
    <result column="introduction_name" property="introductionId" jdbcType="VARCHAR" />
    <result column="u_time" property="uTime" jdbcType="TIMESTAMP" />
    <result column="c_time" property="cTime" jdbcType="TIMESTAMP" />
    <result column="student_phone" property="studentPhone" jdbcType="CHAR" />
    <result column="backup" property="backup" jdbcType="LONGVARCHAR" />
    <result column="org_name" property="orgName" jdbcType="VARCHAR" />
    <result column="doc_name" property="docName" jdbcType="VARCHAR" />
  </resultMap>

  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id as eid, order_id, area, nj, listen_subject, listen_time, teacher, teacher_phone, if_bounced,
    ifbounced_time, c_time as ec_time, u_time as uec_time, valid
  </sql>
  <sql id="Blob_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    teacher_info
  </sql>

  <select id="selectResult" resultMap="BaseResultMap" parameterType="com.muze.core.app.hforder.model.HfOrder">
        SELECT
            e.id as eid,
            e.order_id,
            e.area,
            e.nj,
            e.listen_subject,
            e.listen_time,
            e.teacher,
            e.teacher_phone,
            e.teacher_info,
            e.if_bounced,
            e.ifbounced_time,
            e.c_time as ec_time,
            e.u_time as eu_time,
            a.id,
            a.doc_id,
            a.student_id,
            a.student_name,
            a.gaokao_year,
            a.love_subject,
            a.channel,
            a.if_listener,
            a.if_success,
            a.if_error,
            a.if_introduction,
            a.introduction_type,
            a.introduction_name,
            a.u_time,
            a.c_time,
            a.student_phone,
            b.doc_name,
            d.org_name,
            a.BACKUP
        FROM
            hf_listen e
            INNER JOIN hf_order a ON e.order_id = a.id
            INNER JOIN hrip_doc b ON a.doc_id = b.doc_id
            INNER JOIN hrip_org_doc c ON a.doc_id = c.doc_id
            INNER JOIN hrip_org d ON c.org_id = d.org_id
      <where>
          <if test="studentId != null and studentId != ''" >
              and a.student_id = #{studentId,jdbcType=VARCHAR}
          </if>
          <if test="studentName != null and studentName != ''" >
              and  a.student_name = #{studentName,jdbcType=VARCHAR}
          </if>

          <if test="studentPhone != null and studentPhone != ''" >
              and a.student_phone =  #{studentPhone,jdbcType=CHAR}
          </if>
          <if test="docName != null and docName != ''" >
              and b.doc_name =  #{docName,jdbcType=VARCHAR}
          </if>
          <if test="orgName != null and orgName != ''" >
              and d.org_name =  #{orgName,jdbcType=VARCHAR}
          </if>
          <if test="ctime_from != null and ctime_from != ''" >
              and UNIX_TIMESTAMP(e.c_time) &gt;=  UNIX_TIMESTAMP(#{ctime_from,jdbcType=VARCHAR})
          </if>
          <if test="ctime_to != null and ctime_to != ''" >
              and UNIX_TIMESTAMP(e.c_time) &lt;=  UNIX_TIMESTAMP(#{ctime_to,jdbcType=VARCHAR})  + 60*60*24-1
          </if>

          <if test="listentime_from != null and listentime_from != ''" >
              and UNIX_TIMESTAMP(e.listen_time) &gt;=  UNIX_TIMESTAMP(#{listentime_from,jdbcType=VARCHAR})
          </if>
          <if test="listentime_to != null and listentime_to != ''" >
              and UNIX_TIMESTAMP(e.listen_time) &lt;=  UNIX_TIMESTAMP(#{listentime_to,jdbcType=VARCHAR})  + 60*60*24-1
          </if>

          <if test="jump != null and jump != ''" >
              and if_bounced =  #{jump,jdbcType=TINYINT}
          </if>

          <if test="docids.size()>0">
              and a.doc_id
              <foreach collection="docids" index="index" item="f_doc_id" open="in(" separator="," close=")">
                  #{f_doc_id}
              </foreach>
          </if>

            AND a.valid = 1
            AND e.valid = 1
      </where>
  </select>

  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from hf_listen
    where id = #{id,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from hf_listen
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.muze.core.app.hflisten.model.HfListen" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into hf_listen (id, order_id, area, 
      nj, listen_subject, listen_time, 
      teacher, teacher_phone, if_bounced, 
      ifbounced_time, c_time, u_time, 
      valid, teacher_info)
    values (#{id,jdbcType=BIGINT}, #{orderId,jdbcType=BIGINT}, #{area,jdbcType=VARCHAR}, 
      #{nj,jdbcType=VARCHAR}, #{listenSubject,jdbcType=VARCHAR}, #{listenTime,jdbcType=TIMESTAMP}, 
      #{teacher,jdbcType=VARCHAR}, #{teacherPhone,jdbcType=VARCHAR}, #{ifBounced,jdbcType=BIT}, 
      #{ifbouncedTime,jdbcType=TIMESTAMP}, #{cTime,jdbcType=TIMESTAMP}, #{uTime,jdbcType=TIMESTAMP}, 
      #{valid,jdbcType=INTEGER}, #{teacherInfo,jdbcType=LONGVARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.muze.core.app.hflisten.model.HfListen" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into hf_listen
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="orderId != null" >
        order_id,
      </if>
      <if test="area != null" >
        area,
      </if>
      <if test="nj != null" >
        nj,
      </if>
      <if test="listenSubject != null" >
        listen_subject,
      </if>
      <if test="listenTime != null" >
        listen_time,
      </if>
      <if test="teacher != null" >
        teacher,
      </if>
      <if test="teacherPhone != null" >
        teacher_phone,
      </if>
      <if test="ifBounced != null" >
        if_bounced,
      </if>
      <if test="ifbouncedTime != null" >
        ifbounced_time,
      </if>
      <if test="cTime != null" >
        c_time,
      </if>
      <if test="uTime != null" >
        u_time,
      </if>
      <if test="valid != null" >
        valid,
      </if>
      <if test="teacherInfo != null" >
        teacher_info,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=BIGINT},
      </if>
      <if test="orderId != null" >
        #{orderId,jdbcType=BIGINT},
      </if>
      <if test="area != null" >
        #{area,jdbcType=VARCHAR},
      </if>
      <if test="nj != null" >
        #{nj,jdbcType=VARCHAR},
      </if>
      <if test="listenSubject != null" >
        #{listenSubject,jdbcType=VARCHAR},
      </if>
      <if test="listenTime != null" >
        #{listenTime,jdbcType=TIMESTAMP},
      </if>
      <if test="teacher != null" >
        #{teacher,jdbcType=VARCHAR},
      </if>
      <if test="teacherPhone != null" >
        #{teacherPhone,jdbcType=VARCHAR},
      </if>
      <if test="ifBounced != null" >
        #{ifBounced,jdbcType=BIT},
      </if>
      <if test="ifbouncedTime != null" >
        #{ifbouncedTime,jdbcType=TIMESTAMP},
      </if>
      <if test="cTime != null" >
        #{cTime,jdbcType=TIMESTAMP},
      </if>
      <if test="uTime != null" >
        #{uTime,jdbcType=TIMESTAMP},
      </if>
      <if test="valid != null" >
        #{valid,jdbcType=INTEGER},
      </if>
      <if test="teacherInfo != null" >
        #{teacherInfo,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.muze.core.app.hflisten.model.HfListen" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update hf_listen
    <set >
      <if test="orderId != null" >
        order_id = #{orderId,jdbcType=BIGINT},
      </if>
      <if test="area != null" >
        area = #{area,jdbcType=VARCHAR},
      </if>
      <if test="nj != null" >
        nj = #{nj,jdbcType=VARCHAR},
      </if>
      <if test="listenSubject != null" >
        listen_subject = #{listenSubject,jdbcType=VARCHAR},
      </if>
      <if test="listenTime != null" >
        listen_time = #{listenTime,jdbcType=TIMESTAMP},
      </if>
      <if test="teacher != null" >
        teacher = #{teacher,jdbcType=VARCHAR},
      </if>
      <if test="teacherPhone != null" >
        teacher_phone = #{teacherPhone,jdbcType=VARCHAR},
      </if>
      <if test="ifBounced != null" >
        if_bounced = #{ifBounced,jdbcType=BIT},
      </if>
      <if test="ifbouncedTime != null" >
        ifbounced_time = #{ifbouncedTime,jdbcType=TIMESTAMP},
      </if>
      <if test="cTime != null" >
        c_time = #{cTime,jdbcType=TIMESTAMP},
      </if>
      <if test="uTime != null" >
        u_time = #{uTime,jdbcType=TIMESTAMP},
      </if>
      <if test="valid != null" >
        valid = #{valid,jdbcType=INTEGER},
      </if>
      <if test="teacherInfo != null" >
        teacher_info = #{teacherInfo,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.muze.core.app.hflisten.model.HfListen" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update hf_listen
    set order_id = #{orderId,jdbcType=BIGINT},
      area = #{area,jdbcType=VARCHAR},
      nj = #{nj,jdbcType=VARCHAR},
      listen_subject = #{listenSubject,jdbcType=VARCHAR},
      listen_time = #{listenTime,jdbcType=TIMESTAMP},
      teacher = #{teacher,jdbcType=VARCHAR},
      teacher_phone = #{teacherPhone,jdbcType=VARCHAR},
      if_bounced = #{ifBounced,jdbcType=BIT},
      ifbounced_time = #{ifbouncedTime,jdbcType=TIMESTAMP},
      c_time = #{cTime,jdbcType=TIMESTAMP},
      u_time = #{uTime,jdbcType=TIMESTAMP},
      valid = #{valid,jdbcType=INTEGER},
      teacher_info = #{teacherInfo,jdbcType=LONGVARCHAR}
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.muze.core.app.hflisten.model.HfListen" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update hf_listen
    set order_id = #{orderId,jdbcType=BIGINT},
      area = #{area,jdbcType=VARCHAR},
      nj = #{nj,jdbcType=VARCHAR},
      listen_subject = #{listenSubject,jdbcType=VARCHAR},
      listen_time = #{listenTime,jdbcType=TIMESTAMP},
      teacher = #{teacher,jdbcType=VARCHAR},
      teacher_phone = #{teacherPhone,jdbcType=VARCHAR},
      if_bounced = #{ifBounced,jdbcType=BIT},
      ifbounced_time = #{ifbouncedTime,jdbcType=TIMESTAMP},
      c_time = #{cTime,jdbcType=TIMESTAMP},
      u_time = #{uTime,jdbcType=TIMESTAMP},
      valid = #{valid,jdbcType=INTEGER}
    where id = #{id,jdbcType=BIGINT}
  </update>
</mapper>